## Event Storming
https://miro.com/app/board/uXjVLxzaRnQ=/

### На основе модели ES я выделила следующие контексты:
- подбор персонала и матчинг
- расчеты/биллинг (расчет скидки, выставление инвойсов, история списаний и начислений)
- сервис заказов
- сервис расходников - подбор расходников
- контроль качества
- нотификации
- пользователи


### Логика по которой сгруппировали команды и события в контексты

1. подбор персонала и матчинг

В описании к ТЗ есть следующее: "Благодаря отсеву и матчингу компания планирует выделяться на фоне конкурентов."
То есть, этот сервис является ключевым (core доменом), а такие сервисы компания разрабатывает сама. 
Здесь выбираем топ 3% из котов и сопоставляем с клиентом.
Мэтчинг не вынесен отдельно т.к пока подбор просто через рандом, то есть нет сложной логики.
    

2. расчеты/биллинг (расчет скидки, выставление инвойсов, история списаний и начислений)

По схеме ES можно выделить несколько процессов связанных с расчетами и биллингом (возможно нужно будет разделить при добавлении логики), а именно:
* расчет скидки
* расчет стоимости услуг (+ предварительный расчет стоимости услуг)
* выставление инвойсов
* история платежей

3. сервис заказов

Есть несколько процессов связанных с заказом
* клиент создал заказ
* воркер его обработал
Заказ меняет статусы

4. расходники - подбор расходников

* заказ расходников
* выдача расходников

5. контроль качества (возможно стоит объеденить с сервисом заказов)

* проверка заказа

6. нотификации

Оповещения о каком-либо действии присутствуют в разных модулях системы, чтоб не дублировать логику связанную с отправкой нотификаций в каждом модуле - вынесла в отдельный модуль

7. пользователи

В системе присутствуют пользователи с определенными ролями, которые как-то попадают в систему
Также могут делать ставки

## Модель данных

Лежит рядом в папке data model


## Реализация системы
Запрос от бизнеса:
* низкий ТТМ (Time To Market)
* 10 заказов в день и 100 клиентов
* Для бизнеса критично проверять новые гипотезы по отсеву котов и изменять уже существующие с максимальной скоростью и надёжностью.

Необходимо уточнить требования по времени доступности системы.

На данном этапе кажется, что нам подойдет монолитная структура с разбивкой по модулям-сервисам, т.к. :
* модульна структура монолита уменьшит сложность системы (легче дебажить), над модулями могут работать разные команды
* эвенты системы можно отправлять через коллбэки, тк действуем внутри одной системы
* быстродействие системы выше по сравнению с микросервисами где играет роль сетевые задержки
* в системе работает мало клиентов, скорее всего редеплой системы не окажет значимого влияния, 
особенно если он будет в утренние или ночные часы - то есть доставку изменений можно организовывать ежедневно
* с точки зрения мониторинга - легче мониторить монолит

Быстрая проверка гипотез - насколько поняла из описания, это про то, что клиент может заносить в систему свои тесты и настраивать их для каждого кота.
Мне кажется, это детали реализации модуля подбора персонала и матчинга

Достаточно 1 монолита (можно сделать два, для отказоусточивости, но придется решать проблемы синхронизации данных между ними)
БД: одна бд с репликацией (мало клиентов, мало заказов, ощущение, что информации будет храниться не много, но стоит уточнить и просчитать нагрузку, как долго мы будем хранить данные)
Есть взаимодействие с внешними системами (золотая шляпа, система ставок) - возможно добавиться асинхронное взаимодействие

Как сервисы будут общаться: внутри системы синхронно, + в некоторых местах системы необходим шедулер (счета выставляются раз в месяц и тд)








